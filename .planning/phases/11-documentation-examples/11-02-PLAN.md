---
phase: 11-documentation-examples
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - claudecode-adapter/src/lib.rs
  - codex-adapter/src/lib.rs
  - opencode-adapter/src/lib.rs
  - mcp/src/lib.rs
autonomous: true

must_haves:
  truths:
    - "All public items in adapter crates have doc comments"
    - "Compiler enforces documentation coverage on all public APIs"
    - "Contributors can understand internal modules from docs"
  artifacts:
    - path: "claudecode-adapter/src/lib.rs"
      provides: "Claude adapter with missing_docs lint"
      contains: "#![warn(missing_docs)]"
    - path: "codex-adapter/src/lib.rs"
      provides: "Codex adapter with missing_docs lint"
      contains: "#![warn(missing_docs)]"
    - path: "opencode-adapter/src/lib.rs"
      provides: "OpenCode adapter with missing_docs lint"
      contains: "#![warn(missing_docs)]"
    - path: "mcp/src/lib.rs"
      provides: "MCP crate with missing_docs lint"
      contains: "#![warn(missing_docs)]"
  key_links:
    - from: "*/lib.rs"
      to: "public items"
      via: "#![warn(missing_docs)]"
      pattern: "warn\\(missing_docs\\)"
---

<objective>
Enable `#![warn(missing_docs)]` lint on all adapter crates and MCP crate, then fix any resulting warnings to achieve comprehensive documentation coverage.

Purpose: Per user decision in CONTEXT.md, fix all ~265 missing-docs warnings for a clean slate where every public item gets documentation. This ensures contributors and users can understand the full API surface.

Output: All four crates (claudecode-adapter, codex-adapter, opencode-adapter, rig-mcp-server) have `#![warn(missing_docs)]` enabled and pass without warnings.
</objective>

<execution_context>
@/home/pnod/.claude/get-shit-done/workflows/execute-plan.md
@/home/pnod/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/11-documentation-examples/11-CONTEXT.md
@.planning/phases/11-documentation-examples/11-RESEARCH.md
@claudecode-adapter/src/lib.rs
@codex-adapter/src/lib.rs
@opencode-adapter/src/lib.rs
@mcp/src/lib.rs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enable missing_docs lint and audit adapter crates</name>
  <files>
claudecode-adapter/src/lib.rs
codex-adapter/src/lib.rs
opencode-adapter/src/lib.rs
  </files>
  <action>
For each adapter crate (claudecode-adapter, codex-adapter, opencode-adapter):

1. Add `#![warn(missing_docs)]` at the crate root (after any existing attributes)

2. Run `cargo check -p {crate-name}` to identify missing docs

3. Add doc comments to any undocumented public items:
   - Modules: Use `///` with one-line summary
   - Structs/Enums: Describe purpose and usage
   - Functions: Include `# Errors` section for fallible functions
   - Fields: Brief description of what the field holds

4. For items that are genuinely internal-only but must be public (e.g., for crate interop), use `#[doc(hidden)]` sparingly with inline comment explaining why

Pattern for doc comments:
```rust
/// Brief one-line summary.
///
/// More detailed explanation if needed.
///
/// # Errors
///
/// Returns `FooError::Bar` when...
pub fn example() -> Result<T, E> { ... }
```

Do NOT:
- Use `#[allow(missing_docs)]` to suppress warnings (fix root cause)
- Write trivial docs like "Gets the value" (add actual insight)
- Skip error documentation on Result-returning functions
  </action>
  <verify>
- `cargo check -p claudecode-adapter 2>&1 | grep -c "missing documentation"` returns 0
- `cargo check -p codex-adapter 2>&1 | grep -c "missing documentation"` returns 0
- `cargo check -p opencode-adapter 2>&1 | grep -c "missing documentation"` returns 0
  </verify>
  <done>All three adapter crates have #![warn(missing_docs)] and pass check without warnings</done>
</task>

<task type="auto">
  <name>Task 2: Enable missing_docs lint on MCP crate</name>
  <files>mcp/src/lib.rs</files>
  <action>
For the rig-mcp-server crate (in mcp/ directory):

1. Add `#![warn(missing_docs)]` at the crate root

2. Run `cargo check -p rig-mcp-server` to identify gaps

3. Focus documentation effort on:
   - `extraction/` module: ExtractionConfig, ExtractionError, ExtractionMetrics, ExtractionOrchestrator
   - `tools/` module: JsonSchemaToolkit, builder types, tool implementations
   - `server/` module: RigMcpHandler, McpConfig, ToolSetExt trait

4. For each public type, ensure:
   - Summary line (first sentence, standalone)
   - Purpose explanation
   - Example if non-obvious
   - `# Errors` section for fallible methods

5. Fix the existing warning: "public documentation for `run_opencode` links to private item `MAX_OUTPUT_BYTES`"
   - Either make MAX_OUTPUT_BYTES pub or remove the link from docs

Pattern for builder documentation:
```rust
/// Builder for configuring X.
///
/// # Example
///
/// ```
/// let x = XBuilder::default()
///     .field(value)
///     .build();
/// ```
pub struct XBuilder { ... }
```
  </action>
  <verify>
- `cargo check -p rig-mcp-server 2>&1 | grep -c "missing documentation"` returns 0
- `cargo doc -p rig-mcp-server --no-deps 2>&1 | grep -c "warning"` returns 0
  </verify>
  <done>MCP crate has #![warn(missing_docs)] and passes check without warnings</done>
</task>

<task type="auto">
  <name>Task 3: Workspace-wide documentation verification</name>
  <files>None (verification only)</files>
  <action>
Run comprehensive documentation checks across the entire workspace:

1. `cargo doc --workspace --no-deps` - should complete without warnings

2. Verify each crate has the lint enabled:
   - `grep -l "warn(missing_docs)" */src/lib.rs` should list all 4 adapter crates + mcp

3. Verify rig-cli and rig-provider already have `deny(missing_docs)` (they do from Phase 8)

4. Run `cargo test --workspace --doc` to ensure all doc examples compile

5. Create a checklist of documentation coverage:
   - [ ] claudecode-adapter: #![warn(missing_docs)] enabled
   - [ ] codex-adapter: #![warn(missing_docs)] enabled
   - [ ] opencode-adapter: #![warn(missing_docs)] enabled
   - [ ] rig-mcp-server: #![warn(missing_docs)] enabled
   - [ ] rig-cli: #![deny(missing_docs)] (already present)
   - [ ] rig-provider: #![deny(missing_docs)] (already present)
  </action>
  <verify>
- `cargo doc --workspace --no-deps 2>&1 | grep -E "warning.*missing" | wc -l` returns 0
- `cargo test --workspace --doc` passes
  </verify>
  <done>All workspace crates have documentation lints enabled and pass without warnings</done>
</task>

</tasks>

<verification>
1. `cargo doc --workspace --no-deps` completes with zero warnings
2. `cargo test --workspace --doc` passes
3. All 6 crates have either `warn(missing_docs)` or `deny(missing_docs)`
4. Broken intra-doc link in opencode-adapter fixed
</verification>

<success_criteria>
- Zero documentation warnings across workspace
- All adapter crates have #![warn(missing_docs)]
- MCP crate has #![warn(missing_docs)]
- Doc tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/11-documentation-examples/11-02-SUMMARY.md`
</output>
